# Provider Configuration
# This file defines the available providers and their configurations

providers:
  llm:
    azure:
      endpoint: "${LLM_ENDPOINT}"
      deployment_name: "${LLM_DEPLOYMENT_NAME}"
      api_version: "${LLM_API_VERSION:2024-08-01-preview}"
      model_name: "${LLM_MODEL_NAME}"
      use_managed_identity: "${LLM_USE_MANAGED_IDENTITY:true}"
      api_key: "${LLM_API_KEY}"
      vision_deployment_name: "${LLM_VISION_DEPLOYMENT_NAME}"
      vision_api_version: "${LLM_VISION_API_VERSION:2024-08-01-preview}"
      timeout: "${LLM_TIMEOUT:200}"
      max_retries: "${LLM_MAX_RETRIES:2}"
      temperature: "${LLM_TEMPERATURE:0.0}"
    
    openai:
      api_key: "${OPENAI_API_KEY}"
      model_name: "${OPENAI_MODEL:gpt-4o}"
      embedding_model: "${OPENAI_EMBEDDING_MODEL:text-embedding-3-small}"
      timeout: "${OPENAI_TIMEOUT:200}"
      max_retries: "${OPENAI_MAX_RETRIES:2}"
      temperature: "${OPENAI_TEMPERATURE:0.0}"
  
  search:
    azure_ai_search:
      endpoint: "${SEARCH_ENDPOINT}"
      api_key: "${SEARCH_API_KEY}"
      use_managed_identity: "false"
      index_name: "${SEARCH_INDEX_NAME:default}"
      timeout: "${SEARCH_TIMEOUT:30}"
    
    elasticsearch:
      endpoint: "${ELASTICSEARCH_ENDPOINT}"
      username: "${ELASTICSEARCH_USERNAME}"
      password: "${ELASTICSEARCH_PASSWORD}"
      index_name: "${ELASTICSEARCH_INDEX_NAME:default}"
      timeout: "${ELASTICSEARCH_TIMEOUT:30}"
  
  vision:
    azure:
      endpoint: "${LLM_ENDPOINT}"
      deployment_name: "${LLM_VISION_DEPLOYMENT_NAME}"
      api_version: "${LLM_VISION_API_VERSION:2024-08-01-preview}"
      use_managed_identity: "${LLM_USE_MANAGED_IDENTITY:true}"
      api_key: "${LLM_API_KEY}"
      timeout: "${VISION_TIMEOUT:200}"
    
    openai:
      api_key: "${OPENAI_API_KEY}"
      model: "${OPENAI_VISION_MODEL:gpt-4o}"
      timeout: "${OPENAI_VISION_TIMEOUT:200}"
  
  transcription:
    azure:
      endpoint: "${SPEECH_SERVICE_ENDPOINT}"
      deployment_name: "${SPEECH_SERVICE_DEPLOYMENT_NAME}"
      api_version: "${SPEECH_SERVICE_API_VERSION:2024-08-01-preview}"
      api_key: "${SPEECH_SERVICE_KEY}"
      use_managed_identity: "${SPEECH_USE_MANAGED_IDENTITY:true}"
      timeout: "${SPEECH_TIMEOUT:200}"
    
    openai:
      api_key: "${OPENAI_API_KEY}"
      model: "${OPENAI_WHISPER_MODEL:whisper-1}"
      timeout: "${OPENAI_WHISPER_TIMEOUT:200}"
  
  storage:
    azure_blob:
      connection_string: "${STORAGE_CONNECTION_STRING}"
      account_name: "${STORAGE_ACCOUNT_NAME}"
      container_name: "${STORAGE_CONTAINER_NAME:default}"
      use_managed_identity: "${STORAGE_USE_MANAGED_IDENTITY:true}"
    
    local:
      base_path: "${LOCAL_STORAGE_PATH:/tmp/mmct}"
      max_file_size: "${LOCAL_STORAGE_MAX_FILE_SIZE:100MB}"

# Default provider selection
defaults:
  llm: "${LLM_PROVIDER:azure}"
  search: "${SEARCH_PROVIDER:azure_ai_search}"
  vision: "${VISION_PROVIDER:azure}"
  transcription: "${TRANSCRIPTION_PROVIDER:azure}"
  storage: "${STORAGE_PROVIDER:azure_blob}"

# Feature flags
features:
  enable_caching: "${ENABLE_CACHING:true}"
  enable_metrics: "${ENABLE_METRICS:true}"
  enable_tracing: "${ENABLE_TRACING:false}"
  enable_rate_limiting: "${ENABLE_RATE_LIMITING:true}"